
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Programmer’s Guide &#8212; FUNtoFEM .0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyFUNtoFEM" href="py_script.html" />
    <link rel="prev" title="Transfer Scheme" href="transfer_scheme.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py_script.html" title="pyFUNtoFEM"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="transfer_scheme.html" title="Transfer Scheme"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FUNtoFEM .0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Programmer’s Guide</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="programmer-s-guide">
<h1>Programmer’s Guide<a class="headerlink" href="#programmer-s-guide" title="Permalink to this heading">¶</a></h1>
<p>This section explains how to add your solver, shape parameterization, algorithm to the FUNtoFEM framework.
It will be helpful to be familiar with the existing driver and model classes before attempting to add or modify the framework.</p>
<p>Any add new variables you add to the body and scenario classes will be accessible to any of the solvers, so if you need to exchange or just store data, this is a good place to do it.</p>
<section id="create-an-interface-class-for-a-solver">
<h2>Create an interface class for a solver<a class="headerlink" href="#create-an-interface-class-for-a-solver" title="Permalink to this heading">¶</a></h2>
<p>The interface class for the solver allows the FUNtoFEM driver to instruct the solver to perform tasks like iterate and has some setters and getters to exchange data.
The setters and getters are written from the perspective of FUNtoFEM, i.e., the direction of the setters and getters is such that the setters put data from FUNtoFEM into the solver and the getters retrieve data from the solver to be used in FUNtoFEM.
If your solver does not need a particular method described below, leaving it as a <em>pass</em> as in the base class is acceptable.</p>
<p>The file solver_interface.py contains the base interface class which has the routines necessary for using the nonlinear block Gauss Seidel solver.
All of the methods in this class (except set_mesh) have the current scenario and the list of bodies as inputs.
These objects contain the coupling input data for the solver and are where the solver interface needs to set the coupling output.</p>
<section id="data-to-be-set-during-initialization">
<h3>Data to be set during initialization<a class="headerlink" href="#data-to-be-set-during-initialization" title="Permalink to this heading">¶</a></h3>
<p>Before instantiating the driver, the <code class="xref py py-class docutils literal notranslate"><span class="pre">Body</span></code> objects need to contain some information about the meshes.
It is recommended to do this during the instantiation of the solvers in the solver dictionary.
For an aerodynamic solver, the <code class="xref py py-class docutils literal notranslate"><span class="pre">Body</span></code> holds the surface mesh and number of nodes on the processor: body.aero_X and body.aero_nnodes.
aero_X is a flattened array of length 3*aero_nnodes.
For a structural solver, the <code class="xref py py-class docutils literal notranslate"><span class="pre">Body</span></code> holds the entire structural mesh and number of nodes: body.struct_X and body.struct_nnodes.
struct_X is a flattened array of length 3*struct_nnodes.</p>
</section>
<section id="solver-interface-class">
<h3>Solver Interface Class<a class="headerlink" href="#solver-interface-class" title="Permalink to this heading">¶</a></h3>
</section>
</section>
<section id="create-a-body-class-with-shape-parameterization">
<h2>Create a body class with shape parameterization<a class="headerlink" href="#create-a-body-class-with-shape-parameterization" title="Permalink to this heading">¶</a></h2>
<p>To create a shape parameterization, three functions need to added to the body class:</p>
<section id="initialize-shape-parameterization">
<h3>initialize_shape_parameterization()<a class="headerlink" href="#initialize-shape-parameterization" title="Permalink to this heading">¶</a></h3>
</section>
<section id="update-shape">
<h3>update_shape<a class="headerlink" href="#update-shape" title="Permalink to this heading">¶</a></h3>
</section>
<section id="shape-derivative">
<h3>shape_derivative<a class="headerlink" href="#shape-derivative" title="Permalink to this heading">¶</a></h3>
</section>
</section>
<section id="create-a-new-driver">
<h2>Create a new driver<a class="headerlink" href="#create-a-new-driver" title="Permalink to this heading">¶</a></h2>
<p>To create a new driver, you only need to add the algorithms use to solve the coupled equations: _solve_steady_forward, _solve_steady_adjoint, _solve_unsteady_forward, _solve_unsteady_adjoint.
If you are only need either a steady or unsteady driver, you do not need to add the other pair of functions.
The functions are hidden (begin with an underscore) since they should only be called by the driver.
The user should call <code class="xref py py-func docutils literal notranslate"><span class="pre">solve_forward()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">solve_adjoint()</span></code>.
Within the driver, the programmer has the freedom to make calls in certain order.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Programmer’s Guide</a><ul>
<li><a class="reference internal" href="#create-an-interface-class-for-a-solver">Create an interface class for a solver</a><ul>
<li><a class="reference internal" href="#data-to-be-set-during-initialization">Data to be set during initialization</a></li>
<li><a class="reference internal" href="#solver-interface-class">Solver Interface Class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-a-body-class-with-shape-parameterization">Create a body class with shape parameterization</a><ul>
<li><a class="reference internal" href="#initialize-shape-parameterization">initialize_shape_parameterization()</a></li>
<li><a class="reference internal" href="#update-shape">update_shape</a></li>
<li><a class="reference internal" href="#shape-derivative">shape_derivative</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-a-new-driver">Create a new driver</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="transfer_scheme.html"
                          title="previous chapter">Transfer Scheme</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="py_script.html"
                          title="next chapter">pyFUNtoFEM</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py_script.html" title="pyFUNtoFEM"
             >next</a> |</li>
        <li class="right" >
          <a href="transfer_scheme.html" title="Transfer Scheme"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FUNtoFEM .0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Programmer’s Guide</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, FUNtoFEM Developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>